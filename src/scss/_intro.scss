/* ============================================================
   INTRO — две половины (PLE / FLASH)
   1) h2 + underline
   2) p — текст на всю ширину
   3) button — белый бордер + underline 90% ширины над кнопкой
   ============================================================ */

:root{
  /* геометрия карточки */
  --intro-card-w: min(60%, 760px);
  --intro-pad: clamp(22px, 2.6vw, 36px);
  --intro-radius: 18px;
  --intro-border: rgba(255,255,255,.35);
  --intro-bg: rgba(0,0,0,.55);

  /* типографика */
  --intro-title-color: #fff;
  --intro-text-color:  #E6E8EB;

  /* линии */
  --intro-line-color:  #fff;
  --intro-line-opacity: .85;
  --intro-line-radius: 2px;

  /* выравнивание кнопок */
  --intro-cta-offset: 60px; /* сдвиг от центра */

  /* фикс треков (чтобы кнопки всегда на одной линии) */
  --intro-row-title: 80px;   /* место под заголовок + его underline */
  --intro-row-text:  200px;  /* видимая зона текста */

  /* затемнение (hover) */
  --intro-dim-brightness: 0.55; /* 0 = чёрная, 1 = без затемнения */
  --intro-dim-transition: .28s;
}

.intro{
  width:100%;
  height:900px;
  display:flex;

  &-box{
    width:100%;
    height:100%;
    display:flex;

    /* ===== половины ===== */
    &-ple,
    &-flesh{
      width:50%;
      height:100%;
      position:relative;
      overflow:hidden;

      &-photo{
        position:absolute;
        inset:0;

        &-img{
          width:100%;
          height:100%;
          object-fit:cover;
          display:block;
        }
      }

      &-box{
        position:absolute;
        inset:0;
        display:flex;
        justify-content:center;
        align-items:center;
        z-index:10;

        /* ===== карточка ===== */
        &-area{
          width: var(--intro-card-w);
          padding: var(--intro-pad);
          background: var(--intro-bg);
          border: 1px solid var(--intro-border);
          border-radius: var(--intro-radius);

          /* Жёсткая сетка: title / text / button */
          display:grid;
          grid-template-rows: var(--intro-row-title) var(--intro-row-text) auto;
          row-gap: clamp(12px, 2vw, 18px);

          /* ---------- 1) TITLE ---------- */
          &-title{
            margin:0;
            color: var(--intro-title-color);
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: .02em;
            font-size: clamp(22px, 3.6vw, 34px);
            text-align:center;
            white-space: nowrap;
            overflow:hidden;
            text-overflow: ellipsis;

            /* к низу своего трека + underline */
            display:flex;
            align-items:flex-end;
            justify-content:center;
            position:relative;
            padding-bottom: 14px;

            &::after{
              content:"";
              position:absolute;
              left:50%;
              bottom:0;
              transform:translateX(-50%);
              width:400px;
              height:1px;
              border-radius: var(--intro-line-radius);
              background: var(--intro-line-color);
              opacity: var(--intro-line-opacity);
            }
          }

          /* ---------- 2) TEXT (во всю ширину) ---------- */
          &-text{
            margin-top: 20px;
            width:100%;
            color: var(--intro-text-color);
            font-size: clamp(13px, 1.9vw, 16px);
            line-height:1.65;
            text-align:justify;

            /* не даём треку раздуваться — лишний текст не сдвигает кнопку */
            overflow: hidden;
            position:relative;
            -webkit-mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 80%, rgba(0,0,0,0) 100%);
                    mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 80%, rgba(0,0,0,0) 100%);

            &::after{
              content:"";
              position:absolute;
              left:50%;
              bottom:25px;
              transform:translateX(-50%);
              width:400px;
              height:1px;
              border-radius: var(--intro-line-radius);
              background: var(--intro-line-color);
              opacity: var(--intro-line-opacity);
            }
          }

          /* ---------- 3) BUTTON ---------- */
          &-btn{
            justify-self:end;
            align-self:end;
            padding: 14px 32px;
            font-weight: 800;
            font-size: 1rem;
            color:#fff;
            background:#F26522;
            border:1px solid #fff;            /* белый бордер */
            border-radius:10px;
            cursor:pointer;
            transition: background-color .25s ease, transform .2s ease;
            position: relative;               /* для псевдоэлемента линии */

            /* белая линия над кнопкой (90% ширины карточки) */
            &::before{
              content:"";
              position:absolute;
              left:50%;
              top:-18px;
              transform: translateX(-50%);
              width: 90%;
              height:2px;
              background: var(--intro-line-color);
              opacity: var(--intro-line-opacity);
              border-radius: var(--intro-line-radius);
              pointer-events:none;
            }

            &:hover{ background:#FA7A2F; transform: translateY(-1px); }
            &:active{ transform: translateY(0); }
          } /* end &-btn */
        } /* end &-box-area */
      } /* end &-box */
    } /* end &-ple, &-flesh */

    /* ===== зеркальные правила ===== */
    &-ple{
      &-box-area-btn{ margin-right: var(--intro-cta-offset); }
      &-photo-img{ object-position: right center; }
    }
    &-flesh{
      &-box-area-btn{ justify-self:start; margin-left: var(--intro-cta-offset); }
      &-photo-img{ object-position: 30% center; }
    }
  } /* end &-box */
} /* end .intro */

/* ===== hover затемнение: затемняем ту половину, на которой нет hover ===== */
/* плавность для половин */
.intro .intro-box-ple,
.intro .intro-box-flesh{
  transition: filter var(--intro-dim-transition) ease, opacity var(--intro-dim-transition) ease;
  will-change: filter, opacity;
}

/* при hover над контейнером затемняем ту половину, на которой нет hover */
.intro .intro-box:hover .intro-box-ple:not(:hover),
.intro .intro-box:hover .intro-box-flesh:not(:hover) {
  filter: brightness(var(--intro-dim-brightness));
}

/* наведённая половина — без фильтра */
.intro .intro-box-ple:hover,
.intro .intro-box-flesh:hover {
  filter: none;
}

/* выключаем поведение на устройствах без hover (мобильники, сенсор) */
@media (hover: none), (pointer: coarse) {
  .intro .intro-box-ple,
  .intro .intro-box-flesh {
    filter: none !important;
    transition: none !important;
  }
}

/* ===== адаптив ===== */
@media (max-width: 1080px){
  :root{ --intro-row-text: 220px; }
  .intro{ height:auto; }
}
@media (max-width: 960px){
  .intro .intro-box{ flex-direction:column; }
  .intro .intro-box-ple, .intro .intro-box-flesh{ width:100%; height:60vh; }
  .intro .intro-box-ple-box-area, .intro .intro-box-flesh-box-area{ width: calc(100% - 32px); margin: 0 16px; }
  /* на узких — кнопки по центру, без смещения */
  .intro .intro-box-ple-box-area-btn,
  .intro .intro-box-flesh-box-area-btn{ margin:0; justify-self:center; }
}
