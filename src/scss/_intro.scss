/* ============================================================
   INTRO — две половины (PLE / FLASH)
   1) h2 + underline
   2) p — текст на всю ширину
   3) button — белый бордер + underline 90% ширины над кнопкой
   ============================================================ */

:root{
  /* геометрия карточки */
  --intro-card-w: min(60%, 760px);
  --intro-pad: clamp(22px, 2.6vw, 36px);
  --intro-radius: 18px;
  --intro-border: rgba(255,255,255,.35);
  --intro-bg: rgba(0,0,0,.55);

  /* типографика */
  --intro-title-color: #fff;
  --intro-text-color:  #E6E8EB;

  /* линии */
  --intro-line-color:  #fff;
  --intro-line-opacity: .85;
  --intro-line-radius: 2px;

  /* выравнивание кнопок */
  --intro-cta-offset: 60px; /* сдвиг от центра */

  /* затемнение (hover) */
  --intro-dim-brightness: 0.55; /* 0 = чёрная, 1 = без затемнения */
  --intro-dim-transition: .28s;
}

.intro{
  width:100%;
  height:900px;
  display:flex;
  margin-top: 50px;

  &-box{
    width:100%;
    height:100%;
    display:flex;

    /* ===== половины ===== */
    &-ple,
    &-flesh{
      width:50%;
      height:100%;
      position:relative;
      overflow:hidden;

      &-photo{
        position:absolute;
        inset:0;

        &-img{
          width:100%;
          height:100%;
          object-fit:cover;
          display:block;
        }
      }

      &-box{
        position:absolute;
        inset:0;
        display:flex;
        justify-content:center;
        align-items:center;
        z-index:10;

        /* ===== карточка ===== */
        &-area{
          width: var(--intro-card-w);
          padding: var(--intro-pad);
          background: var(--intro-bg);
          border: 1px solid var(--intro-border);
          border-radius: var(--intro-radius);

          /* Гибкая сетка: title / text / button */
          display:grid;
          grid-template-rows: auto 1fr auto;
          row-gap: clamp(12px, 2vw, 18px);

          /* ---------- 1) TITLE ---------- */
          &-title{
            margin:0;
            color: var(--intro-title-color);
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.00em;
            font-size: clamp(22px, 3.6vw, 34px);
            text-align:center;
            
            /* Разрешаем переносы по словам */
            white-space: normal;
            overflow: visible;
            word-wrap: break-word;
            hyphens: auto;

            /* к низу своего трека + underline */
            display:flex;
            align-items:flex-end;
            justify-content:center;
            position:relative;
            padding-bottom: 14px;
            min-height: 60px; /* минимальная высота для underline */

            &::after{
              content:"";
              position:absolute;
              left:50%;
              bottom:0;
              transform:translateX(-50%);
              width: min(400px, 90%); /* ограничиваем ширину линии */
              height:1px;
              border-radius: var(--intro-line-radius);
              background: var(--intro-line-color);
              opacity: var(--intro-line-opacity);
            }
          }

          /* ---------- 2) TEXT (во всю ширину) ---------- */
          &-text{
            margin: 20px 0; /* добавим отступы чтобы текст не касался линий */
            width:100%;
            color: var(--intro-text-color);
            font-size: clamp(13px, 1.9vw, 16px);
            line-height:1.65;
            text-align:justify;

            /* Убираем фиксированную высоту и маску - текст растягивается свободно */
            overflow: visible;
            position:relative;
            -webkit-mask-image: none;
                    mask-image: none;

            /* Контейнер для линии под текстом */
            &-container {
              position: relative;
              padding-bottom: 30px; /* отступ для линии */
            }

            &::after{
              content:"";
              position:absolute;
              left:50%;
              bottom:-20px;
              transform:translateX(-50%);
              width: min(400px, 90%); /* ограничиваем ширину линии */
              height:1px;
              border-radius: var(--intro-line-radius);
              background: var(--intro-line-color);
              opacity: var(--intro-line-opacity);
            }
          }

          /* ---------- 3) BUTTON ---------- */
          &-btn{
            display: none;
            justify-self:end;
            align-self:end;
            padding: 14px 32px;
            font-weight: 800;
            font-size: 1rem;
            color:#fff;
            background:#F26522;
            border:1px solid #fff;            /* белый бордер */
            border-radius:10px;
            cursor:pointer;
            transition: background-color .25s ease, transform .2s ease;
            position: relative;               /* для псевдоэлемента линии */

            /* белая линия над кнопкой (90% ширины карточки) */
            &::before{
              content:"";
              position:absolute;
              left:50%;
              top:-18px;
              transform: translateX(-50%);
              width: 90%;
              height:2px;
              background: var(--intro-line-color);
              opacity: var(--intro-line-opacity);
              border-radius: var(--intro-line-radius);
              pointer-events:none;
            }

            &:hover{ background:#FA7A2F; transform: translateY(-1px); }
            &:active{ transform: translateY(0); }
          } /* end &-btn */
        } /* end &-box-area */
      } /* end &-box */
    } /* end &-ple, &-flesh */

    /* ===== зеркальные правила ===== */
    &-ple{
      &-box-area-btn{ margin-right: var(--intro-cta-offset); }
      &-photo-img{ object-position: right center; }
    }
    &-flesh{
      &-box-area-btn{ justify-self:start; margin-left: var(--intro-cta-offset); }
      &-photo-img{ object-position: 30% center; }
    }
  } /* end &-box */
} /* end .intro */

/* ===== hover затемнение: затемняем ту половину, на которой нет hover ===== */
/* плавность для половин */
.intro .intro-box-ple,
.intro .intro-box-flesh{
  transition: filter var(--intro-dim-transition) ease, opacity var(--intro-dim-transition) ease;
  will-change: filter, opacity;
}

/* при hover над контейнером затемняем ту половину, на которой нет hover */
.intro .intro-box:hover .intro-box-ple:not(:hover),
.intro .intro-box:hover .intro-box-flesh:not(:hover) {
  filter: brightness(var(--intro-dim-brightness));
}

/* наведённая половина — без фильтра */
.intro .intro-box-ple:hover,
.intro .intro-box-flesh:hover {
  filter: none;
}

/* ===== АДАПТИВ ===== */

/* Брейкпоинт 1200px - меняем ориентацию на вертикальную */
@media (max-width: 1200px){
  .intro{ 
    height: auto; 
    min-height: 100vh;
  }
  
  .intro .intro-box{ 
    flex-direction: column; 
  }
  
  .intro .intro-box-ple, 
  .intro .intro-box-flesh{ 
    width: 100%; 
    height: auto;
    min-height: 600px;
  }
  
  .intro .intro-box-ple-box-area, 
  .intro .intro-box-flesh-box-area{ 
    width: min(90%, 600px); 
    margin: 40px auto;
  }
  
  /* Центрируем кнопки на мобильных */
  .intro .intro-box-ple-box-area-btn,
  .intro .intro-box-flesh-box-area-btn{ 
    margin: 0; 
    justify-self: center; 
  }
  
  /* Убираем смещение позиции изображения для лучшего отображения */
  .intro .intro-box-ple-photo-img,
  .intro .intro-box-flesh-photo-img{ 
    object-position: center center; 
  }

  /* На мобильных делаем заголовки более адаптивными */
  .intro .intro-box-ple-box-area-title,
  .intro .intro-box-flesh-box-area-title {
    font-size: clamp(20px, 4vw, 30px);
    line-height: 1.3;
    min-height: 50px;
  }
}

/* Дополнительные адаптивные правки для очень маленьких экранов */
@media (max-width: 768px){
  .intro .intro-box-ple, 
  .intro .intro-box-flesh{ 
    min-height: 500px;
  }
  
  .intro .intro-box-ple-box-area, 
  .intro .intro-box-flesh-box-area{ 
    width: calc(100% - 32px); 
    padding: 20px;
    margin: 20px auto;
  }

  /* Еще более адаптивные заголовки на маленьких экранах */
  .intro .intro-box-ple-box-area-title,
  .intro .intro-box-flesh-box-area-title {
    font-size: clamp(18px, 5vw, 26px);
    min-height: 45px;
  }

  /* Уменьшаем ширину линий на мобильных */
  .intro .intro-box-ple-box-area-title::after,
  .intro .intro-box-flesh-box-area-title::after,
  .intro .intro-box-ple-box-area-text::after,
  .intro .intro-box-flesh-box-area-text::after {
    width: min(300px, 85%);
  }
}

/* выключаем поведение на устройствах без hover (мобильники, сенсор) */
@media (hover: none), (pointer: coarse) {
  .intro .intro-box-ple,
  .intro .intro-box-flesh {
    filter: none !important;
    transition: none !important;
  }
}